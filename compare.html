<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compare Dances | Global Movement Research</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .compare-intro {
            max-width: 800px;
            margin: 0 auto 2rem;
            text-align: center;
        }
        
        .compare-intro p {
            color: var(--text-secondary);
        }
        
        .compare-controls {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: end;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--surface);
            border-radius: 8px;
        }
        
        .compare-select-group label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .compare-select-group select {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: white;
            cursor: pointer;
        }
        
        .compare-select-group select:focus {
            outline: none;
            border-color: var(--ocean);
        }
        
        .compare-vs {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--text-muted);
            padding-bottom: 0.5rem;
        }
        
        .compare-viewers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 3rem;
        }
        
        .viewer-panel {
            background: #1a1a2e;
            border-radius: 8px;
            overflow: hidden;
            aspect-ratio: 4/3;
        }
        
        .viewer-panel iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .viewer-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255,255,255,0.4);
            font-size: 0.9rem;
        }
        
        .viewer-label {
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .analysis-section {
            background: var(--surface);
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 3rem;
        }
        
        .analysis-section h2 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        
        .analysis-placeholder {
            color: var(--text-muted);
            font-style: italic;
        }
        
        .suggested-comparisons {
            margin-top: 3rem;
        }
        
        .suggested-comparisons h2 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .comparison-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .comparison-card {
            background: var(--surface);
            border-radius: 8px;
            padding: 1.5rem;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .comparison-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .comparison-card h3 {
            font-family: var(--font-display);
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        
        .comparison-card .traditions {
            font-size: 0.85rem;
            color: var(--ocean);
            margin-bottom: 0.75rem;
        }
        
        .comparison-card p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        .guide-section {
            margin-top: 3rem;
            padding: 2rem;
            background: linear-gradient(135deg, var(--surface) 0%, #f0ebe3 100%);
            border-radius: 8px;
        }
        
        .guide-section h2 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .guide-section ul {
            list-style: none;
            padding: 0;
        }
        
        .guide-section li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-secondary);
        }
        
        .guide-section li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: var(--earth);
        }
        
        @media (max-width: 768px) {
            .compare-controls {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .compare-vs {
                padding: 0.5rem 0;
            }
            
            .compare-viewers {
                grid-template-columns: 1fr;
            }
            
            .viewer-panel {
                aspect-ratio: 16/10;
            }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">GMR</a>
            <ul class="nav-links">
                <li><a href="maps.html">Map</a></li>
                <li><a href="dances.html">Dances</a></li>
                <li><a href="compare.html" class="active">Compare</a></li>
                <li><a href="methods.html">Methods</a></li>
            </ul>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <header class="page-header">
                <h1>Compare Dances</h1>
                <p class="subtitle">Side-by-side analysis across traditions</p>
            </header>
            
            <div class="compare-intro">
                <p>Select two dances to view them simultaneously. Look for structural similarities 
                that might indicate shared heritage, parallel evolution, or cultural exchange. 
                The comparison tool reveals what notation and verbal description cannot.</p>
            </div>
            
            <div class="compare-controls">
                <div class="compare-select-group">
                    <label for="dance1">First Dance</label>
                    <select id="dance1">
                        <option value="">Select a dance...</option>
                        <optgroup label="Edo/Bini/Tiv (Sinclair)">
                            <option value="sinclair_ugho_cyberspace.html">Ugho</option>
                            <option value="sinclair_swange_cyberspace.html">Swange</option>
                            <option value="sinclair_ekombi_cyberspace.html">Ekombi</option>
                            <option value="sinclair_esapkaide_i_cyberspace.html">Esapkaide I</option>
                            <option value="sinclair_esapkaide_ii_cyberspace.html">Esapkaide II</option>
                            <option value="sinclair_esapkaide_iii_cyberspace.html">Esapkaide III</option>
                            <option value="sinclair_bata_cyberspace.html">Bata (Sinclair)</option>
                            <option value="sinclair_bata_extended_cyberspace.html">Bata Extended</option>
                        </optgroup>
                        <optgroup label="Ewe/Ga (Mustapha)">
                            <option value="mustapha_atsiagbekor_cyberspace.html">Atsiagbekor</option>
                            <option value="mustapha_agbadza_cyberspace.html">Agbadza</option>
                            <option value="mustapha_adzogbo_cyberspace.html">Adzogbo</option>
                            <option value="mustapha_kpanlongo_cyberspace.html">Kpanlongo</option>
                            <option value="mustapha_djole_cyberspace.html">Djole</option>
                            <option value="mustapha_fumefume_cyberspace.html">Fumefume</option>
                            <option value="mustapha_bata_cyberspace.html">Bata (Mustapha)</option>
                        </optgroup>
                        <optgroup label="Orisha (Nadia)">
                            <option value="nadia_yemaya__cyberspace.html">Yemayá</option>
                            <option value="nadia_chango__cyberspace.html">Changó</option>
                            <option value="nadia_kuele_kuele_cyberspace.html">Kuele Kuele</option>
                        </optgroup>
                        <optgroup label="Kandyan/Low Country (Sudesh)">
                            <option value="sudesh_kohomba_kankariya_cyberspace.html">Kohomba Kankariya</option>
                            <option value="sudesh_telme_ruhunu_cyberspace.html">Telme Ruhunu</option>
                            <option value="sudesh_gajaga_vannama_slow_cyberspace.html">Gajaga Vannama (Slow)</option>
                            <option value="sudesh_gajaga_vannama_fast_cyberspace.html">Gajaga Vannama (Fast)</option>
                            <option value="sudesh_folk___court_dance_cyberspace.html">Folk & Court Dance</option>
                            <option value="sudesh_baila_kappirinna_cyberspace.html">Baila Kappirinna</option>
                        </optgroup>
                        <optgroup label="Irish Step (Kate)">
                            <option value="kate_slip_jig_cyberspace.html">Slip Jig</option>
                            <option value="kate_sean-no_s_jigs_cyberspace.html">Sean-nós Jigs</option>
                            <option value="kate_festival_blackbird_cyberspace.html">Festival Blackbird</option>
                            <option value="kate_molyneaux_blackbird_cyberspace.html">Molyneaux Blackbird</option>
                            <option value="kate_garden_of_daisies_cyberspace.html">Garden of Daisies</option>
                        </optgroup>
                        <optgroup label="Brazilian (Kate)">
                            <option value="kate_frevo_cyberspace.html">Frevo</option>
                        </optgroup>
                        <optgroup label="Latin Social (Annie & Laura)">
                            <option value="annie_laura_salsa_cyberspace.html">Salsa</option>
                        </optgroup>
                    </select>
                </div>
                
                <div class="compare-vs">vs</div>
                
                <div class="compare-select-group">
                    <label for="dance2">Second Dance</label>
                    <select id="dance2">
                        <option value="">Select a dance...</option>
                        <optgroup label="Edo/Bini/Tiv (Sinclair)">
                            <option value="sinclair_ugho_cyberspace.html">Ugho</option>
                            <option value="sinclair_swange_cyberspace.html">Swange</option>
                            <option value="sinclair_ekombi_cyberspace.html">Ekombi</option>
                            <option value="sinclair_esapkaide_i_cyberspace.html">Esapkaide I</option>
                            <option value="sinclair_esapkaide_ii_cyberspace.html">Esapkaide II</option>
                            <option value="sinclair_esapkaide_iii_cyberspace.html">Esapkaide III</option>
                            <option value="sinclair_bata_cyberspace.html">Bata (Sinclair)</option>
                            <option value="sinclair_bata_extended_cyberspace.html">Bata Extended</option>
                        </optgroup>
                        <optgroup label="Ewe/Ga (Mustapha)">
                            <option value="mustapha_atsiagbekor_cyberspace.html">Atsiagbekor</option>
                            <option value="mustapha_agbadza_cyberspace.html">Agbadza</option>
                            <option value="mustapha_adzogbo_cyberspace.html">Adzogbo</option>
                            <option value="mustapha_kpanlongo_cyberspace.html">Kpanlongo</option>
                            <option value="mustapha_djole_cyberspace.html">Djole</option>
                            <option value="mustapha_fumefume_cyberspace.html">Fumefume</option>
                            <option value="mustapha_bata_cyberspace.html">Bata (Mustapha)</option>
                        </optgroup>
                        <optgroup label="Orisha (Nadia)">
                            <option value="nadia_yemaya__cyberspace.html">Yemayá</option>
                            <option value="nadia_chango__cyberspace.html">Changó</option>
                            <option value="nadia_kuele_kuele_cyberspace.html">Kuele Kuele</option>
                        </optgroup>
                        <optgroup label="Kandyan/Low Country (Sudesh)">
                            <option value="sudesh_kohomba_kankariya_cyberspace.html">Kohomba Kankariya</option>
                            <option value="sudesh_telme_ruhunu_cyberspace.html">Telme Ruhunu</option>
                            <option value="sudesh_gajaga_vannama_slow_cyberspace.html">Gajaga Vannama (Slow)</option>
                            <option value="sudesh_gajaga_vannama_fast_cyberspace.html">Gajaga Vannama (Fast)</option>
                            <option value="sudesh_folk___court_dance_cyberspace.html">Folk & Court Dance</option>
                            <option value="sudesh_baila_kappirinna_cyberspace.html">Baila Kappirinna</option>
                        </optgroup>
                        <optgroup label="Irish Step (Kate)">
                            <option value="kate_slip_jig_cyberspace.html">Slip Jig</option>
                            <option value="kate_sean-no_s_jigs_cyberspace.html">Sean-nós Jigs</option>
                            <option value="kate_festival_blackbird_cyberspace.html">Festival Blackbird</option>
                            <option value="kate_molyneaux_blackbird_cyberspace.html">Molyneaux Blackbird</option>
                            <option value="kate_garden_of_daisies_cyberspace.html">Garden of Daisies</option>
                        </optgroup>
                        <optgroup label="Brazilian (Kate)">
                            <option value="kate_frevo_cyberspace.html">Frevo</option>
                        </optgroup>
                        <optgroup label="Latin Social (Annie & Laura)">
                            <option value="annie_laura_salsa_cyberspace.html">Salsa</option>
                        </optgroup>
                    </select>
                </div>
            </div>
            
            <div class="compare-viewers">
                <div class="viewer-panel" id="viewer1">
                    <div class="viewer-label" id="label1">Select first dance</div>
                    <div class="viewer-placeholder" id="placeholder1">Select a dance from the dropdown above</div>
                </div>
                <div class="viewer-panel" id="viewer2">
                    <div class="viewer-label" id="label2">Select second dance</div>
                    <div class="viewer-placeholder" id="placeholder2">Select a dance from the dropdown above</div>
                </div>
            </div>
            
            <section class="analysis-section">
                <h2>Comparative Analysis</h2>
                <div id="analysisContent">
                    <p class="analysis-placeholder">Select two dances above to see comparative observations.</p>
                </div>
            </section>
            
            <section class="suggested-comparisons">
                <h2>Suggested Comparisons</h2>
                <div class="comparison-cards">
                    <div class="comparison-card" data-d1="sinclair_bata_cyberspace.html" data-d2="mustapha_bata_cyberspace.html">
                        <h3>Bata: Two Interpretations</h3>
                        <div class="traditions">Nigeria (Sinclair) vs Ghana (Mustapha)</div>
                        <p>Same sacred tradition, different regional embodiments. Compare how the Yoruba drum dance manifests across performers and communities.</p>
                    </div>
                    
                    <div class="comparison-card" data-d1="sinclair_bata_cyberspace.html" data-d2="nadia_chango__cyberspace.html">
                        <h3>Yoruba to Santería</h3>
                        <div class="traditions">Nigeria → Cuba</div>
                        <p>Trace the Atlantic passage: Nigerian Bata alongside Cuban Changó. What persists across the Middle Passage? What transforms?</p>
                    </div>
                    
                    <div class="comparison-card" data-d1="kate_slip_jig_cyberspace.html" data-d2="mustapha_atsiagbekor_cyberspace.html">
                        <h3>Footwork Traditions</h3>
                        <div class="traditions">Ireland vs Ghana</div>
                        <p>Irish step and Ewe warrior dance both emphasize lower-body articulation with constrained upper body. Convergent evolution or deeper connection?</p>
                    </div>
                    
                    <div class="comparison-card" data-d1="sudesh_gajaga_vannama_slow_cyberspace.html" data-d2="sudesh_gajaga_vannama_fast_cyberspace.html">
                        <h3>Tempo as Transformation</h3>
                        <div class="traditions">Sri Lanka (slow vs fast)</div>
                        <p>The same vannama at different speeds. How does tempo change the spatial signature of the elephant's movement?</p>
                    </div>
                    
                    <div class="comparison-card" data-d1="nadia_yemaya__cyberspace.html" data-d2="nadia_chango__cyberspace.html">
                        <h3>Orisha Embodiment</h3>
                        <div class="traditions">Cuba (Yemayá vs Changó)</div>
                        <p>Ocean mother versus thunder king. Compare how different orisha characters create distinct movement vocabularies within the same tradition.</p>
                    </div>
                    
                    <div class="comparison-card" data-d1="kate_frevo_cyberspace.html" data-d2="kate_slip_jig_cyberspace.html">
                        <h3>Atlantic Footwork</h3>
                        <div class="traditions">Brazil vs Ireland</div>
                        <p>Pernambuco carnival meets Celtic step. Two traditions where the feet carry the story—what patterns emerge?</p>
                    </div>
                </div>
            </section>
            
            <section class="guide-section">
                <h2>Reading Comparisons</h2>
                <p>When viewing dances side by side, consider:</p>
                <ul>
                    <li><strong>Vertical vs horizontal emphasis</strong> — Does movement expand upward or outward?</li>
                    <li><strong>Isolation patterns</strong> — Which body parts move independently vs in unison?</li>
                    <li><strong>Rhythmic architecture</strong> — How does timing create spatial shapes?</li>
                    <li><strong>Center of gravity</strong> — Where does weight live in the body?</li>
                    <li><strong>Symmetry</strong> — Bilateral, radial, or asymmetric organization?</li>
                    <li><strong>Phrase structure</strong> — How do movements group into larger units?</li>
                </ul>
                <p style="margin-top: 1rem; color: var(--text-secondary);">
                    These geometric properties constitute what we call <strong>Structural Affinity Markers (SAMs)</strong>—
                    patterns that can indicate shared heritage, parallel development, or cultural exchange.
                    See <a href="methods.html">Methods</a> for the full analytical framework.
                </p>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h4>Global Movement Research</h4>
                    <p>Documenting human movement heritage through ethical motion capture and open archives.</p>
                </div>
                <div class="footer-section">
                    <h4>Archive</h4>
                    <ul>
                        <li><a href="maps.html">Confluence Map</a></li>
                        <li><a href="dances.html">Dance Visualizations</a></li>
                        <li><a href="compare.html">Comparison Tool</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="methods.html">Methods</a></li>
                        <li><a href="docs/aei-canonical-first-steps.html">AEI Documentation</a></li>
                        <li><a href="#">GitHub Repository</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Global Movement Research. Open source under MIT License.</p>
            </div>
        </div>
    </footer>

    <script>
        const dance1Select = document.getElementById('dance1');
        const dance2Select = document.getElementById('dance2');
        const viewer1 = document.getElementById('viewer1');
        const viewer2 = document.getElementById('viewer2');
        const label1 = document.getElementById('label1');
        const label2 = document.getElementById('label2');
        const placeholder1 = document.getElementById('placeholder1');
        const placeholder2 = document.getElementById('placeholder2');
        const analysisContent = document.getElementById('analysisContent');
        
        // Dance metadata for analysis
        const danceInfo = {
            'sinclair_bata_cyberspace.html': { name: 'Bata', tradition: 'Yoruba', region: 'Nigeria', performer: 'Sinclair' },
            'sinclair_bata_extended_cyberspace.html': { name: 'Bata Extended', tradition: 'Yoruba', region: 'Nigeria', performer: 'Sinclair' },
            'sinclair_ugho_cyberspace.html': { name: 'Ugho', tradition: 'Edo', region: 'Nigeria', performer: 'Sinclair' },
            'sinclair_swange_cyberspace.html': { name: 'Swange', tradition: 'Tiv', region: 'Nigeria', performer: 'Sinclair' },
            'sinclair_ekombi_cyberspace.html': { name: 'Ekombi', tradition: 'Efik/Ibibio', region: 'Nigeria', performer: 'Sinclair' },
            'sinclair_esapkaide_i_cyberspace.html': { name: 'Esapkaide I', tradition: 'Bini', region: 'Nigeria', performer: 'Sinclair' },
            'sinclair_esapkaide_ii_cyberspace.html': { name: 'Esapkaide II', tradition: 'Bini', region: 'Nigeria', performer: 'Sinclair' },
            'sinclair_esapkaide_iii_cyberspace.html': { name: 'Esapkaide III', tradition: 'Bini', region: 'Nigeria', performer: 'Sinclair' },
            'mustapha_bata_cyberspace.html': { name: 'Bata', tradition: 'Yoruba', region: 'Ghana', performer: 'Mustapha' },
            'mustapha_atsiagbekor_cyberspace.html': { name: 'Atsiagbekor', tradition: 'Ewe', region: 'Ghana', performer: 'Mustapha' },
            'mustapha_agbadza_cyberspace.html': { name: 'Agbadza', tradition: 'Ewe', region: 'Ghana', performer: 'Mustapha' },
            'mustapha_adzogbo_cyberspace.html': { name: 'Adzogbo', tradition: 'Ewe', region: 'Ghana', performer: 'Mustapha' },
            'mustapha_kpanlongo_cyberspace.html': { name: 'Kpanlongo', tradition: 'Ga', region: 'Ghana', performer: 'Mustapha' },
            'mustapha_djole_cyberspace.html': { name: 'Djole', tradition: 'Temne', region: 'Ghana', performer: 'Mustapha' },
            'mustapha_fumefume_cyberspace.html': { name: 'Fumefume', tradition: 'Ga', region: 'Ghana', performer: 'Mustapha' },
            'nadia_yemaya__cyberspace.html': { name: 'Yemayá', tradition: 'Orisha/Santería', region: 'Cuba', performer: 'Nadia' },
            'nadia_chango__cyberspace.html': { name: 'Changó', tradition: 'Orisha/Santería', region: 'Cuba', performer: 'Nadia' },
            'nadia_kuele_kuele_cyberspace.html': { name: 'Kuele Kuele', tradition: 'Afro-Cuban', region: 'Cuba', performer: 'Nadia' },
            'sudesh_kohomba_kankariya_cyberspace.html': { name: 'Kohomba Kankariya', tradition: 'Kandyan', region: 'Sri Lanka', performer: 'Sudesh' },
            'sudesh_telme_ruhunu_cyberspace.html': { name: 'Telme Ruhunu', tradition: 'Low Country', region: 'Sri Lanka', performer: 'Sudesh' },
            'sudesh_gajaga_vannama_slow_cyberspace.html': { name: 'Gajaga Vannama (Slow)', tradition: 'Kandyan', region: 'Sri Lanka', performer: 'Sudesh' },
            'sudesh_gajaga_vannama_fast_cyberspace.html': { name: 'Gajaga Vannama (Fast)', tradition: 'Kandyan', region: 'Sri Lanka', performer: 'Sudesh' },
            'sudesh_folk___court_dance_cyberspace.html': { name: 'Folk & Court Dance', tradition: 'Sri Lankan', region: 'Sri Lanka', performer: 'Sudesh' },
            'sudesh_baila_kappirinna_cyberspace.html': { name: 'Baila Kappirinna', tradition: 'Sri Lankan', region: 'Sri Lanka', performer: 'Sudesh' },
            'kate_slip_jig_cyberspace.html': { name: 'Slip Jig', tradition: 'Irish Step', region: 'Ireland', performer: 'Kate' },
            'kate_sean-no_s_jigs_cyberspace.html': { name: 'Sean-nós Jigs', tradition: 'Irish Step', region: 'Ireland', performer: 'Kate' },
            'kate_festival_blackbird_cyberspace.html': { name: 'Festival Blackbird', tradition: 'Irish Step', region: 'Ireland', performer: 'Kate' },
            'kate_molyneaux_blackbird_cyberspace.html': { name: 'Molyneaux Blackbird', tradition: 'Irish Step', region: 'Ireland', performer: 'Kate' },
            'kate_garden_of_daisies_cyberspace.html': { name: 'Garden of Daisies', tradition: 'Irish Step', region: 'Ireland', performer: 'Kate' },
            'kate_frevo_cyberspace.html': { name: 'Frevo', tradition: 'Brazilian', region: 'Brazil', performer: 'Kate' },
            'annie_laura_salsa_cyberspace.html': { name: 'Salsa', tradition: 'Latin Social', region: 'Caribbean', performer: 'Annie & Laura' }
        };
        
        function loadViewer(select, viewer, label, placeholder, num) {
            const value = select.value;
            const existingFrame = viewer.querySelector('iframe');
            
            if (value) {
                const info = danceInfo[value] || { name: value.replace('_cyberspace.html', '').replace(/_/g, ' ') };
                label.textContent = `${info.name} (${info.tradition}, ${info.region})`;
                
                if (placeholder) placeholder.remove();
                if (existingFrame) existingFrame.remove();
                
                const iframe = document.createElement('iframe');
                iframe.src = 'viz/' + value;
                viewer.appendChild(iframe);
            } else {
                label.textContent = `Select ${num === 1 ? 'first' : 'second'} dance`;
                if (existingFrame) existingFrame.remove();
                if (!viewer.querySelector('.viewer-placeholder')) {
                    const newPlaceholder = document.createElement('div');
                    newPlaceholder.className = 'viewer-placeholder';
                    newPlaceholder.textContent = 'Select a dance from the dropdown above';
                    viewer.appendChild(newPlaceholder);
                }
            }
            
            updateAnalysis();
            updateURL();
        }
        
        function updateAnalysis() {
            const d1 = dance1Select.value;
            const d2 = dance2Select.value;
            
            if (d1 && d2) {
                const info1 = danceInfo[d1];
                const info2 = danceInfo[d2];
                
                let html = `<p><strong>Comparing:</strong> ${info1?.name || 'Dance 1'} (${info1?.tradition}, ${info1?.region}) 
                            with ${info2?.name || 'Dance 2'} (${info2?.tradition}, ${info2?.region})</p>`;
                
                // Generate contextual analysis
                if (info1?.tradition === info2?.tradition) {
                    html += `<p>These dances share the <strong>${info1.tradition}</strong> tradition. 
                            Look for consistent structural markers that define the tradition's movement vocabulary.</p>`;
                }
                
                if (info1?.region === info2?.region) {
                    html += `<p>Both dances come from <strong>${info1.region}</strong>. 
                            Regional proximity often produces shared environmental and cultural influences on movement.</p>`;
                } else {
                    html += `<p>These dances span <strong>${info1?.region}</strong> and <strong>${info2?.region}</strong>. 
                            Cross-regional comparison can reveal migration patterns, trade routes, or parallel evolution.</p>`;
                }
                
                if (info1?.performer === info2?.performer) {
                    html += `<p>Same performer (<strong>${info1.performer}</strong>) performing both dances. 
                            This controls for individual style, isolating tradition-specific differences.</p>`;
                }
                
                analysisContent.innerHTML = html;
            } else {
                analysisContent.innerHTML = '<p class="analysis-placeholder">Select two dances above to see comparative observations.</p>';
            }
        }
        
        function updateURL() {
            const d1 = dance1Select.value;
            const d2 = dance2Select.value;
            const params = new URLSearchParams();
            if (d1) params.set('d1', d1);
            if (d2) params.set('d2', d2);
            const newURL = params.toString() ? `${window.location.pathname}?${params}` : window.location.pathname;
            history.replaceState(null, '', newURL);
        }
        
        function loadFromURL() {
            const params = new URLSearchParams(window.location.search);
            const d1 = params.get('d1');
            const d2 = params.get('d2');
            
            if (d1) {
                dance1Select.value = d1;
                loadViewer(dance1Select, viewer1, label1, placeholder1, 1);
            }
            if (d2) {
                dance2Select.value = d2;
                loadViewer(dance2Select, viewer2, label2, placeholder2, 2);
            }
        }
        
        dance1Select.addEventListener('change', () => loadViewer(dance1Select, viewer1, label1, placeholder1, 1));
        dance2Select.addEventListener('change', () => loadViewer(dance2Select, viewer2, label2, placeholder2, 2));
        
        // Suggested comparison cards
        document.querySelectorAll('.comparison-card').forEach(card => {
            card.addEventListener('click', () => {
                dance1Select.value = card.dataset.d1;
                dance2Select.value = card.dataset.d2;
                loadViewer(dance1Select, viewer1, label1, placeholder1, 1);
                loadViewer(dance2Select, viewer2, label2, placeholder2, 2);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });
        
        // Load from URL on page load
        loadFromURL();
        
        // Nav scroll effect
        const nav = document.querySelector('.nav');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });
    </script>
</body>
</html>
